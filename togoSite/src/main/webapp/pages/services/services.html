<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Service Listing Page</title>
  <link rel="stylesheet" href="services.css" />
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="../login.css" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">

</head>
<body>

<!-- Login Menu!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-->
<div class="popup" id="popupLogin" style="width: 20%; height: 40%;">
  <div class="top-right-button" onclick="closePopupLogin()">X</div>
  <button style="margin-top: 15%;" onclick="on();">My Account</button>
  <button style="margin-top: 10%;" onclick="on();">Privacy Set </button>
  <button id="signOutButton" style="margin-top: 10%;">Log Out</button>
</div>
<!-- Where Login Menu it ends!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-->


<!-- Where the POPUP is!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-->
<div class="popup" id="popup">
  <div class="container" id="container">
    <div class="top-right-button" onclick="closePopup()">X</div>
    <div class="form-container sign-up-container">
      <form action="#">
        <h1>Create Account</h1>
        <input type="text" placeholder="Name" id="nameR"/>
        <input type="email" placeholder="Email" id="emailR"/>
        <div style="display: flex; width: 100%;">
          <input id="password" type="password" placeholder="Password" />
          <i class="far fa-eye" id="togglePassword" style="margin-left: -35px; cursor: pointer; padding: 12px 15px; margin: 8px 0; background-color: #eee;"></i>
        </div>
        <div style="display: flex; width: 100%;">
          <input id="passwordC" type="password" placeholder="Confirm Password" /><br>
          <i class="far fa-eye" id="togglePasswordC" style="margin-left: -35px; cursor: pointer; padding: 12px 15px; margin: 8px 0; background-color: #eee;"></i>
        </div><br>
        <button id="signUpButton2">Sign Up</button>
      </form>
    </div>
    <div class="form-container sign-in-container">
      <form action="#">
        <h1>Sign in</h1>
        <input type="email" placeholder="Email" id="emailL"/>
        <div style="display: flex; width: 100%;">
          <input id="passwordL" type="password" placeholder="Password" />
          <i class="far fa-eye" id="togglePasswordL" style="margin-left: -35px; cursor: pointer; padding: 12px 15px; margin: 8px 0; background-color: #eee;"></i>
        </div><br>
        <button id="signInButton2">Sign In</button>
      </form>
    </div>
    <div class="overlay-container">
      <div class="overlay">
        <div class="overlay-panel overlay-left">
          <h1>Welcome Back!</h1>
          <p>To keep connected with us please login with your personal info</p>
          <button class="ghost" id="signIn">Sign In</button>
        </div>
        <div class="overlay-panel overlay-right">
          <h1>Hello, Friend!</h1>
          <p>Don't have an account?<br>Enter your personal details and start journey with us</p>
          <button class="ghost" id="signUp">Register</button>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Where the POPUP is!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-->

<nav>
  <div class="logo" style="cursor: pointer;" onclick="window.location.href = '../index.html'">TOGO<b>.</b></div>
  <ul class="navItems">
    <li><a style="cursor: pointer;" onclick="window.location.href = '../index.html'">Home</a></li>
    <li><a style="cursor: pointer;" onclick="window.location.href = '../adoption/adoptionPage.html'">Adoption</a></li>
    <li><a style="cursor: pointer;" onclick="window.location.href = '../creating/animalCreatePage.html'">Put for Adoption</a></li>
    <li><a style="cursor: pointer;" onclick="window.location.href = '../services/services.html'">Services</a></li>
    <li><a style="cursor: pointer;" onclick="window.location.href = '../forum/forumPage.html'">Forum</a></li>
    <li class="login">
      <button onclick="openPopup(); container.classList.remove('right-panel-active');">
        <span class="links_name">Login/Register</span>
      </button>
    </li>
  </ul>
</nav>

  <h2 class="services-header" style="margin-left:5%; margin-top: 2%;">Services</h2>
  <div class="main-content" style="padding: 0% 4% 4% 4%;">

  <div class="services">
    <div class="service-item" data-price="10/ day" data-animals="cats,dogs" data-location="porto">
      <div class="service-details">
        <h3>Pet sitting</h3>
        <p style="padding: 15px 10px 15px 10px; width: 80%; margin-left: 5%;"> Hello I'm Jack and I´m here to pet sit your animal, I have 10+ years experience taking care of dogs and cats, I have a vet assistant license</p>
        <a class="animals"><i class="fas fa-paw"></i>Cats, Dogs</a> &emsp;
        <a class="price"><i class="fas fa-tag"></i>$10/day</a> &emsp;
        <a class="location"><i class="fas fa-map-marker-alt"></i>Porto</a>
      </div>
      <div class="service-image">
        <img src="https://skateparkoftampa.com/spot/headshots/5291.jpg" alt="">
      </div>
    </div>

    <div class="service-item" data-price="15/ hour" data-animals="dogs" data-location="setubal">
      <div class="service-details">
        <h3>Pet walking</h3>
        <p style="padding: 15px 10px 15px 10px; width: 80%; margin-left: 5%;"> Hello I'm Michael and I´m here to pet walk your animal, I don't get tired easily and I can run the distance</p>
        <a class="animals"><i class="fas fa-paw"></i>Dogs</a> &emsp;
        <a class="price"><i class="fas fa-tag"></i>$15/hour</a> &emsp;
        <a class="location"><i class="fas fa-map-marker-alt"></i>Setubal</a>
      </div>
      <div class="service-image">
        <img src="https://br.web.img3.acsta.net/c_310_420/pictures/18/09/19/22/37/5221873.jpg" alt="Leash Icon">
      </div>
    </div>

    <div class="service-item" data-price="16/ hour" data-animals="dogs" data-location="lisboa">
      <div class="service-details">
        <h3>Pet walking</h3>
        <p style="padding: 15px 10px 15px 10px; width: 80%; margin-left: 5%;"> Hello I'm Rachel and I´m here to pet walk your animal, I love long walks especially when I have a friend with me</p>
        <a class="animals"><i class="fas fa-paw"></i>Dogs</a> &emsp;
        <a class="price"><i class="fas fa-tag"></i>$16/hour</a> &emsp;
        <a class="location"><i class="fas fa-map-marker-alt"></i>Lisboa</a>
      </div>
      <div class="service-image">
        <img src="https://f.i.uol.com.br/fotografia/2023/09/14/169470220565031a7d26e9f_1694702205_3x4_md.jpg" alt="Grooming Icon">
      </div>
    </div>

    <div class="service-item" data-price="30/ day" data-animals="reptile,bird" data-location="viseu">
      <div class="service-details">
        <h3>Pet sitting</h3>
        <p style="padding: 15px 10px 15px 10px; width: 80%; margin-left: 5%;"> Hello I'm Albertino and I´m here to pet sit your animal, I have 40+ years of experience with exotic animals and I also have 30+ different types of birds ate my house</p>
        <a class="animals"><i class="fas fa-paw"></i>Reptile, Bird</a> &emsp;
        <a class="price"><i class="fas fa-tag"></i>$30/day</a> &emsp;
        <a class="location"><i class="fas fa-map-marker-alt"></i>Viseu</a>
      </div>
      <div class="service-image">
        <img src="https://jornaldasoficinas.com/pt/wp-content/uploads/2020/02/albertino-santosgruposotinar.jpg" alt="">
      </div>
    </div>

    <div class="service-item" data-price="20/ day" data-animals="cats" data-location="porto">
      <div class="service-details">
        <h3>Pet sitting</h3>
        <p style="padding: 15px 10px 15px 10px; width: 80%; margin-left: 5%;"> Hello I'm Jessica and I´m here to pet sit your animal, I don´t have many years of experience but I love animals</p>
        <a class="animals"><i class="fas fa-paw"></i>Cats</a> &emsp;
        <a class="price"><i class="fas fa-tag"></i>$20/day</a> &emsp;
        <a class="location"><i class="fas fa-map-marker-alt"></i>Porto</a>
      </div>
      <div class="service-image">
        <img src="https://www.hiper.fm/wp-content/uploads/2021/06/nogueira-jessica-1200x900.jpg" alt="">
      </div>
    </div>

  </div>

  <div class="sidebar">
    <div class="filters">
      <h3>Location:</h3>
      <select aria-label="label for the select" name="location" id="location">
        <option value="any">Any</option>
        <option value="acores">Açores</option>
        <option value="aveiro">Aveiro</option>
        <option value="beja">Beja</option>
        <option value="braga">Braga</option>
        <option value="braganca">Bragança</option>
        <option value="castelo-branco">Castelo Branco</option>
        <option value="coimbra">Coimbra</option>
        <option value="evora">Évora</option>
        <option value="faro">Faro</option>
        <option value="guarda">Guarda</option>
        <option value="leiria">Leiria</option>
        <option value="lisboa">Lisboa</option>
        <option value="madeira">Madeira</option>
        <option value="portalegre">Portalegre</option>
        <option value="porto">Porto</option>
        <option value="santarem">Santarém</option>
        <option value="setubal">Setúbal</option>
        <option value="viana-do-castelo">Viana do Castelo</option>
        <option value="vila-real">Vila Real</option>
        <option value="viseu">Viseu</option>
      </select>
      <h3>Filters</h3>
      <div class="filter-item">
        <input type="radio" id="sort-asc" name="sort-price" value="asc">
        <label for="sort-asc">Sort by price (ascending)</label>
      </div>
      <div class="filter-item">
        <input type="radio" id="sort-desc" name="sort-price" value="desc">
        <label for="sort-desc">Sort by price (descending)</label>
      </div>
      <div class="filter-item">
        <input type="checkbox" id="bird" name="animal" value="bird">
        <label for="bird">Bird</label>
      </div>
      <div class="filter-item">
        <input type="checkbox" id="dog" name="animal" value="dog">
        <label for="dog">Dog</label>
      </div>
      <div class="filter-item">
        <input type="checkbox" id="cat" name="animal" value="cat">
        <label for="cat">Cat</label>
      </div>
      <div class="filter-item">
        <input type="checkbox" id="reptile" name="animal" value="reptile">
        <label for="reptile">Reptile</label>
      </div>
      <div class="filter-item">
        <input type="checkbox" id="filter-pet-sitting" name="service" value="pet-sitting">
        <label for="filter-pet-sitting">Pet Sitting</label>
      </div>
      <div class="filter-item">
        <input type="checkbox" id="filter-pet-walking" name="service" value="pet-walking">
        <label for="filter-pet-walking">Pet Walking</label>
      </div>
      <button class="post-service-btn" id = "post-service-btn" type="button" style="margin-top: 10%; width: 70%; margin-left: 15%;" onclick="window.location.href = '../services/postService.html'">Create a Service</button>
    </div>
    <div style="margin-bottom: 55%;">
  </div>
</div>
</div>
<div class="last" style="justify-content: center; align-items: center; text-align: center;">
  <br>
  <span style="font-weight: 700; font-size: 20px; color: rgb(221, 218, 208); cursor: pointer;" onclick="window.open('https://startupipm.web.app/', '_blank');"
  >©ARTEMIS2023</span>
</div>

<div id="overlay" onclick="off()" style="z-index: 10000;">
  <div id="textover">DEMO<br>This is only a prototype, the button doesn´t belong to a scenario<br>Sorry for the inconvenience</div>
</div>

</body>

<script type="module">
  //Update the below URL with the appropriate version if necessary.
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
  import {
    getAuth,
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword,
    onAuthStateChanged,
    signOut
    //Update the below URL with the appropriate version if necessary.
  } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-auth.js";


  // INSERT YOUR FIREBASE CONFIG OBJECT HERE
  const firebaseConfig = {
    apiKey: "AIzaSyCnYbqrefRPaXQWR06l554KvNC7rjIEB9o",
    authDomain: "startupipm.firebaseapp.com",
    projectId: "startupipm",
    storageBucket: "startupipm.appspot.com",
    messagingSenderId: "995574355548",
    appId: "1:995574355548:web:aa0fa875180b128de4b899",
    measurementId: "G-NJYNRXD6B4"
  };


  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const signUpButton2 = document.querySelector("#signUpButton2");
  const signInButton2 = document.querySelector("#signInButton2");

  const userSignUp = async() => {
    const email = document.getElementById('emailR').value;
    const password = document.getElementById('password').value;
    createUserWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
              const user = userCredential.user;
              console.log(user);
              alert("Your account has been created!");
              closePopup();
            })
            .catch((error) => {
              const errorCode = error.code;
              const errorMessage = error.message;
              console.log(errorCode + errorMessage)
            })
  }

  const userSignIn = async() => {
    const email = document.getElementById('emailL').value;
    const password = document.getElementById('passwordL').value;
    signInWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
              const user = userCredential.user;
              alert("You have signed in successfully!");
              closePopup();
            })
            .catch((error) => {
              const errorCode = error.code;
              const errorMessage = error.message;
              console.log(errorCode + errorMessage)
            })
  }

  const checkAuthState = async() => {
    var linkElement = document.querySelector('.links_name');
    onAuthStateChanged(auth, user => {
      if(user) {
        linkElement.innerText = user.email.split("@")[0];
        return true;
      }
      return false;
    })
  }

  const userSignOut = async() => {
    var linkElement = document.querySelector('.links_name');
    await signOut(auth);
    linkElement.innerText = 'Login/Register';
    alert("You have logged out successfully!");
    closePopupLogin();
  }

  checkAuthState();

  signUpButton2.addEventListener('click', userSignUp);
  signInButton2.addEventListener('click', userSignIn);
  signOutButton.addEventListener('click', userSignOut);
</script>

<script>
  function filterServices() {
    var services = document.querySelectorAll('.service-item');
    var resultsFound = false;

    services.forEach(function(service) {
        service.style.display = '';
    });
    filterServicesBird()
    filterServicesDog()
    filterServicesCat()
    filterServicesReptile()
    filterServicesByType()
    filterServicesByLocation()

    services.forEach(function(card) {
      if (card.style.display === '') {
        resultsFound = true;
      }
    });

    if (!resultsFound) {
      alert("No results found.");
    }
  }

    // This function would be called whenever the dog checkbox is toggled
function filterServicesCat() {
  var checkbox = document.getElementById('cat');
  var services = document.querySelectorAll('.service-item');

  services.forEach(function(service) {
    var animals = service.querySelector('.animals').textContent;

    if (checkbox.checked && animals.includes('Cat')) {
    } else if (!checkbox.checked) {
    } else {
      service.style.display = 'none'; // hide the service
    }
  });
}
function filterServicesDog() {
  var checkbox = document.getElementById('dog');
  var services = document.querySelectorAll('.service-item');

  services.forEach(function(service) {
    var animals = service.querySelector('.animals').textContent;

    if (checkbox.checked && animals.includes('Dog')) {
    } else if (!checkbox.checked) {
    } else {
      service.style.display = 'none'; // hide the service
    }
  });
}
function filterServicesBird() {
  var checkbox = document.getElementById('bird');
  var services = document.querySelectorAll('.service-item');

  services.forEach(function(service) {
    var animals = service.querySelector('.animals').textContent;

    if (checkbox.checked && animals.includes('Bird')) {
    } else if (!checkbox.checked) {
    } else {
      service.style.display = 'none'; // hide the service
    }
  });
}
function filterServicesReptile() {
  var checkbox = document.getElementById('reptile');
  var services = document.querySelectorAll('.service-item');

  services.forEach(function(service) {
    var animals = service.querySelector('.animals').textContent;

    if (checkbox.checked && animals.includes('Reptile')) {
    } else if (!checkbox.checked) {
    } else {
      service.style.display = 'none'; // hide the service
    }
  });
}


function filterServicesByLocation() {
  const selectedLocation = document.getElementById('location').value;
  const services = document.querySelectorAll('.service-item');

  services.forEach(service => {
    const serviceLocation = service.getAttribute('data-location');
    if (selectedLocation === 'any' || serviceLocation === selectedLocation) {
    } else {
      service.style.display = 'none'; // Hide
    }
  });
}
function filterServicesByType() {
  var filterSitting = document.getElementById('filter-pet-sitting').checked;
  var filterWalking = document.getElementById('filter-pet-walking').checked;
  var services = document.getElementsByClassName('service-item');

  for (var i = 0; i < services.length; i++) {
    var service = services[i];
    var isSittingService = service.textContent.toLowerCase().includes('sitting');
    var isWalkingService = service.textContent.toLowerCase().includes('walking');

    // Determine if the service should be displayed based on the filters
    if ((filterSitting && isSittingService) || (filterWalking && isWalkingService) || (!filterSitting && !filterWalking)) {
    } else {
      service.style.display = 'none';
    }
  }
}
function sortServicesByPrice( ascending = true) {
  const servicesContainer = document.querySelector('.services');
  const services = Array.from(servicesContainer.getElementsByClassName('service-item'));

  services.sort((a, b) => {
    // Extract price values from data-price attribute
    const priceA = parseFloat(a.getAttribute('data-price').split('/')[0]);
    const priceB = parseFloat(b.getAttribute('data-price').split('/')[0]);

   return ascending ?  priceA - priceB: -1 * (priceA - priceB); // For ascending order
  });

  // Re-append sorted services to the container
  services.forEach(service => servicesContainer.appendChild(service));
}

// Event listeners for sorting buttons
document.getElementById('sort-asc').addEventListener('change', () => sortServicesByPrice(true));
document.getElementById('sort-desc').addEventListener('change', () => sortServicesByPrice(false));


// Event listeners for sorting buttons
document.getElementById('sort-asc').addEventListener('change', () => sortServicesByPrice(true));
document.getElementById('sort-desc').addEventListener('change', () => sortServicesByPrice(false));

// Event listeners for sorting buttons
document.getElementById('sort-asc').addEventListener('change', () => sortServicesByPrice(true));
document.getElementById('sort-desc').addEventListener('change', () => sortServicesByPrice(false));

document.getElementById('cat').addEventListener('change', filterServices);
document.getElementById('dog').addEventListener('change', filterServices);
document.getElementById('bird').addEventListener('change', filterServices);
document.getElementById('reptile').addEventListener('change', filterServices);
document.getElementById('location').addEventListener('change', filterServices);
document.getElementById('filter-pet-sitting').addEventListener('change', filterServices);
document.getElementById('filter-pet-walking').addEventListener('change', filterServices);

  document.getElementById('post-service-btn').addEventListener('click', function() {
    window.location.href = 'postService.html';
  });

  let popup = document.getElementById("popup");
    const signUpButton = document.getElementById('signUp');
    const signInButton = document.getElementById('signIn');
    const container = document.getElementById('container');
    let popupLogin = document.getElementById("popupLogin");

    signUpButton.addEventListener('click', () => {
	    container.classList.add("right-panel-active");
    });

    signInButton.addEventListener('click', () => {
	    container.classList.remove("right-panel-active");
    });

    function openPopup() {
      var linkElement = document.querySelector('.links_name');
      if(linkElement.innerText === 'Login/Register')
        popup.classList.toggle("open-popup");
      else{
            popupLogin.classList.toggle("open-popup");
        }
    }

    function closePopup() {
        popup.classList.remove("open-popup");
    }

    function closePopupLogin() {
        popupLogin.classList.remove("open-popup");
    }
    var acc = document.getElementsByClassName("accordion");
    var i;

    for (i = 0; i < acc.length; i++) {
      acc[i].addEventListener("click", function () {
        this.classList.toggle("active");
        this.parentElement.classList.toggle("active");

        var pannel = this.nextElementSibling;

        if (pannel.style.display === "block") {
          pannel.style.display = "none";
        } else {
          pannel.style.display = "block";
        }
      });
    }

    const togglePassword = document.querySelector('#togglePassword');
    const password = document.querySelector('#password');

    togglePassword.addEventListener('click', function (e) {
        const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
        password.setAttribute('type', type);
        this.classList.toggle('fa-eye-slash');
    });

    const togglePassword2 = document.querySelector('#togglePasswordC');
    const password2 = document.querySelector('#passwordC');

    togglePassword2.addEventListener('click', function (e) {
        const type = password2.getAttribute('type') === 'password' ? 'text' : 'passwordC';
        password2.setAttribute('type', type);
        this.classList.toggle('fa-eye-slash');
    });

    const togglePassword3 = document.querySelector('#togglePasswordL');
    const password3 = document.querySelector('#passwordL');

    togglePassword3.addEventListener('click', function (e) {
        const type = password3.getAttribute('type') === 'password' ? 'text' : 'passwordL';
        password3.setAttribute('type', type);
        this.classList.toggle('fa-eye-slash');
    });

    function on() {
        document.getElementById("overlay").style.display = "block";
      }

    function off() {
        document.getElementById("overlay").style.display = "none";
    }

</script>
</html>